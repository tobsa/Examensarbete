@using GridMvc.Html

@model WebShop.ViewModels.StoreViewModel
@{
    ViewBag.Title = "Store";
}

<h3>Browse Products</h3>

<p> Select from @Model.Categories.Count categories </p>

<ul class="list-group">

    @foreach (var category in Model.Categories)
    {
        <li class="list-group-item">
            <h4>
                @Html.ActionLink(category.Name, "Browse", new { category = category.Name }, new { })
            </h4>
             
            @Html.Grid(Model.GetProducts(category.CategoryId)).Columns(column =>
            {
                column.Add()
                    .Encoded(false)
                    .Sanitized(false)
                    .RenderValueAs(x => @<img src="@x.ImageUrl" width="100" height="75">)
                    .SetWidth(125);

                column.Add()
                    .Encoded(false)
                    .Sanitized(false)
                    .RenderValueAs(x =>
                        @Html.ActionLink(x.Name, "Details", new { Id = x.ProductId }));

            })
        </li>
    }
</ul>
